<!doctype html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="widistillh=device-widistillh, initial-scale=1">
    <title>计算音乐： 音频（音乐）编程入门指南</title>
    <script src="/template.v2.js"></script>
    <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?9fa168de1e1fa7f185af1025a30fc6a6";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
</head>

<body>
      <distill-header></distill-header>
      <d-title>
        <h1>音频（音乐）编程入门指南（翻译）</h1>
        <p>
          作者是著名的音频DSP处理开源库<a href="https://pbat.ch/wiki/soundpipe">soundpipe</a>的开发者。注意，这里讨论的音频DSP，主要是音乐相关，其他如音频编解码、语音处理不在讨论之列。
        </p>
        <p>
        文章来源：<a href="https://pbat.ch/wiki/audio_programming_recipe/" > https://pbat.ch/wiki/audio_programming_recipe/ </a> 
        </p>
      </d-title>
      <d-article>
      <h3> 概述 </h3>
      <p>
        本文档旨在为那些有兴趣学习音频编程，特别是底层音频 DSP 开发人员提供一个不算严谨的指南。 它特别适合喜欢音乐的人。 
        我还是一个音乐学校的学生时候，试图自己弄清楚这些东西，而这个文章就是我希望我能开始的指南。
      </p>

      <h3> 从代码开始是学习音频 DSP 是一种艰难的方法 </h3>
      <p>
        相信我，通过代码学习音频 DSP 是最艰难的方法，我在学习 <a href="https://pbat.ch/wiki/soundpipe">soundpipe 项目</a>的时候，就是这种体会，太难了。 
      </p>
      <p>
        当你通过C/C++代码来学习DSP具体实现的时候，能够帮助你了解实际运行的代码，会分散到很多库函数，你很难找到比较直白的表达方式。
        许多组件通常是预先导出或优化的。C/C++ 等编程语法也以一种非常模糊的方式来描述 DSP 算法。在某种程度上，甚至像 FAUST 或 SOUL 这样的音频 DSL 也是如此。
      </p>
      <p>
        这并不是说避免查看代码。 事实上，恰恰相反。 找到尽可能多的已有代码，用它来探索和交互。 
        但是不要指望仅凭代码，就能突然弄懂数字信号处理算法。
      </p>
      <p>
        学习这类东西的最好方法是学习理论，以及如何研究其背后的数学符号的计算含义。 我讨厌这么说，因为我的数学很糟糕（译者：我也是如此），但我发现这是真的。 
        直到我在硕士课程期间参加了 DSP 课程，概念才开始变得有意义，周围都是工程师而不是音乐家。
      </p>
      <p>
        如何学习数字信号处理理论，不在这篇文章的讨论范围内，我也很难给出好的建议。当我想说的说，跟大学其他艰难的课程一样，找到一个好的老师，并且大量的<b>做习题</b>。
        这样的学习，有很长的路要走。如果你对音乐拥有浓厚的兴趣，这会帮助你避免为了理论而理论。
      </p>

      <h3> 音乐编程背后都是数学 </h3>
      <p>音频节目中的程序设计内容很少。它主要归结为循环中的一大堆算术运算。
        正如我的一位朋友所说，“这一切只是乘法和加法”。
        对于新手来说，掌握的东西很少。
        如果你没有计算机科学或软件工程的背景，这可能会很有挑战性，因为你需要掌握一些结构或算法。
      </p>
      <p>
        大多数音频编程需要掌握的技能主要来自于数学模型和算法表示，你仔细地实现它们以有效地在代码中工作。
        另外，在开发实时音频软件的时候，您需要特别注意所涉及的限制。
      </p>

      <h3> 选择一种编程语言来进行实时音频编程 </h3>
      <p>大多数的编程语言，都不太适合来进行<a href="http://www.rossbencina.com/code/real-time-audio-programming-101-time-waits-for-nothing">实时音频编程</a>，特别是那些需要高级内存管理的语言，当然也包含其他因素。
      </p>    
      <p>
        所以，如果你要认真地学习这些东西，你可能需用功学习一些有时候让你崩溃的东西。如果你想做实时音频编程，这一点尤其正确。
      </p>
      <p>
        要清楚：你可以用任何语言做音频DSP，只要它能做数学。我见过很多用Python、Go、Lua和Scheme等语言制作的音乐DSP。然而，用这些语言实现的算法客观上会比用更实时友好的语言编写的算法性能更差。
        实时计算并非关于计算快，而是在确保在规定的时间内计算完。如果这些语言能够满足的你的实时需求，那就一直用这个语言就好了。
        此外，也许你对实时计算毫无兴趣（这样的计算通常更加简单），那也不用换一个编程语言。
      </p>
      
      <p>
        下面这些是特别适合用来进行实时音频处理的编程语言：
      </p>
      <li><b>C</b></li>
      <p>
      C 语言是经典，<a href="https://pbat.ch/wiki/whyc"> 我个人就使用它 </a>。
      我知道这是个非常容易走火的武器，但也是最容易移植的编程语言，并且有大量的存量代码和工具。
      </p>
      
      <li><b>Rust</b></li>
      <p>
        Rust语言也是一个合适的选择，而且似乎势头越来越猛。我不能再多说了，因为我不使用它。但也许有一天我会被雇去写Rust代码。
        (译者：如有可能，我会尽量选择这个语言)
      </p>
      
      <li><b>Zig</b></li>
      <p>
        Zig语言也可能是音频编程的好选择。我对这个项目很感兴趣，甚至可能有一天空了会尝试学习。
      </p>

      <p>
        “音频编程社区”中的许多人会告诉你，你需要学习C++。其实你不需要学习C++，但如果你喜欢这类东西，学习它会帮助你在这个行业找到工作。
        就我个人而言，我不太懂C++，也不太会在工作中使用C++，因此我与音频编程社区断绝了很多的联系。我认为这是一个功能，而不是一个bug。
      </p>

      <h3> 先离线再实时 </h3>
      <p>
        避免开始就开发实时音频应用，而是开发离线程序去生产音频文件，这是一个我极少数作对的事情。
        这样你开始的速度要快得多，模板更少，配置更容易，调试更容易等等。只使用命令行应用程序，不使用GUI。
      </p>
      <p>
        libsndfile开发库是一个很好的起点，我研究的一个音频程序就是库的例子程序<a href="https://github.com/libsndfile/libsndfile/blob/master/examples/make_sine.c"> make_sine.c </a>。
        另外一个进阶案例是<a href="https://github.com/libsndfile/libsndfile/blob/master/examples/sfprocess.c"> sfprocess.c </a>。
        对我来说这个参考代码改变我的游戏，是<a href="https://pbat.ch/wiki/soundpipe">soundpipe</a>产生的催化剂。
      </p>

      <p>
        编写生成音频文件的傻乎乎的程序，然后将这些音频文件带到现有的工作流中的采样器和DAW中！
        总是朝着音乐的方向做事，总是！
      </p>

      <p>
        我还应该指出，从离线到实时要比从实时到离线容易得多。
        我的Soundpipe和sporth项目最初都是离线的，我甚至没有兴趣让它们实时工作。
        但是，向实时的过渡基本上是平稳的，主要是因为我没有做任何花哨的事情。
        反面的例子，LMMS是一种DAW，在其成立之初就采用实时技术，十多年后，仍然存在与离线渲染相关的问题。
        记住我的话，这是因为他们试图做一些花哨的事情，比如使用多线程引擎（yikes）和利用过采样。
      </p>

      <h3> 暂时避免编写插件 </h3>
      <p>
        每个人都想制作类似VST/AU插件的酷炫东西，这样他们就可以在DAW中使用它们。我想他们可以等一下。就我个人而言，除了一些小的尝试，我从未做过任何插件开发。目前，我并不认为这是我需要学习的技能。
        首先我承认，确实插件让一些事情变得更难，但它也简化了很多事情，使我可以专注于事情而不会感到太沮丧。
      </p>

      <p>
        插件是一个巨大的复杂体，它们只是增加了整个过程中的学习量，并且让大多数简单事情变得更加麻烦。
        新手应该考虑的唯一一件事是核心内部DSP环路，其他如滑块、旋钮、GUI、实时输入等可以再等等。
      </p>

      <p>
        插件开发有太多的模板和额外的麻烦要担心，这与您无关。它们也很难调试。
        在我有限的插件开发经验中，我总是花时间在实际插件中构建命令行测试程序。
        这使我能够更快地调试代码，而且调试时间更短。
        我之所以想到这个想法，是因为我花了很多时间来构建简单的离线实用程序。
      </p>

      <p>
        值得一提的是：虽然JUCE使插件开发异常容易，但JUCE并不适合新手。
        它是为专业编写音频插件的经验丰富的C++开发人员构建的。它也是一个复杂的玩意，掩盖了许多其他复杂的内容。
      </p>

      <p>
        说真的，只需坚持编写一些小的命令行程序，生产一段时间的WAV文件。这很有趣，你会惊讶它会带你走多远！
      </p>

      <p>
        但是，如果你想学习如何制作插件，我建议你学习<a href="http://www.ladspa.org/">LADSPA </a>，这是我遇到的最简单的音频插件架构之一。SDK很小，并且附带了示例C代码，不仅用于插件，还用于插件加载器。
        我自己从来没有真正使用过LADSPA，但使用这个SDK帮助我更好地理解了插件到底是什么。
      </p>

      <h3>学习FAUST（最终）</h3>
      <p>
        Faust是一个非常棒的软件，你可以在将来的某个时刻开始学习。
        对我来说，在您用较低级别的语言（如C/C++）完成了一些工作之后，将非常合适应用FAUST。
        通常，无论如何，您都需要将C++代码与FAUST结合使用。
        对于更简单的DSP算法，有时FAUST可能会被过度使用，简单的滤波器、延迟和振荡器在C/C++中非常容易管理，并不一定要用FAUST。
        但是当你开始构建更复杂的东西，比如混响和物理模型时，FAUST中的事情开始有了回报。
      </p>

      </d-article>

      <d-appendix></d-appendix>

      <distill-footer></distill-footer>
  </body>
